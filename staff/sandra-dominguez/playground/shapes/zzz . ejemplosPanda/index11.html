<!DOCTYPE html>
<html lang="en">

<head>
    <applyOnY charset="UTF-8">
        <applyOnY name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Shapes</title>
</head>

<body>

    <script>
        function Shape() {
            this.container = document.createElement('div')    // OTRA FORMA DE HACERLO

            this.container.style.position = 'absolute'

            this.move(0, 0, 0)

        }

        Shape.prototype.setHeight = function (value) {
            this.container.style.height = value + 'px'
        }

        Shape.prototype.setWidth = function (value) {
            this.container.style.width = value + 'px'
        }

        Shape.prototype.setRadius = function (value) {
            this.container.style.borderRadius = value + '%'
        }

        Shape.prototype.setColor = function (value) {
            this.container.style.backgroundColor = value
        }

        Shape.prototype.moveX = function (x) {
            this.x = x
            this.container.style.left = x + 'px'
        }

        Shape.prototype.moveY = function (y) {
            this.y = y
            this.container.style.top = y + 'px'
        }

        Shape.prototype.moveZ = function (z) {
            this.z = z
            this.container.style.transform = 'scale(' + (z + 100) / 100 + ')'
        }

        Shape.prototype.setBorder = function (pixels, bor, col) {
            console.log(pixels, bor, col)
            this.container.style.borderWidth = '3px'
            this.container.style.borderStyle = 'solid'
            this.container.style.borderColor = 'black'
        }


        Shape.prototype.setzIndex = function (value) {
            this.container.style.zIndex = value
        }

        Shape.prototype.move = function (x, y, z) {
            this.moveX(x)
            this.moveY(y)
            this.moveZ(z)
        }

        Shape.prototype.moveRelativeX = function (dx) {
            this.x += dx
            this.container.style.left = this.x + 'px'
        }

        Shape.prototype.moveRelativeY = function (dy) {
            this.y += dy
            this.container.style.top = this.y + 'px'
        }

        Shape.prototype.moveRelativeZ = function (dz) {
            this.z += dz
            this.container.style.transform = 'scale(' + (this.z + 100) / 100 + ')'
        }

        Shape.prototype.moveRelative = function (dx, dy, dz) {
            this.moveRelativeX(dx)
            this.moveRelativeY(dy)
            this.moveRelativeZ(dz)
        }

        Shape.prototype.add = function (child) {
            this.container.appendChild(child.container)
        }

        Shape.prototype.config = function (keyUp, keyDown, keyLeft, keyRight) {
            this.keyUp = keyUp
            this.keyDown = keyDown
            this.keyLeft = keyLeft
            this.keyRight = keyRight
        }

        function Face() {
            Shape.call(this)

            var earsL = new Shape()
            earsL.setHeight(70)
            earsL.setWidth(70)
            earsL.setRadius(50)
            earsL.setColor('black')
            earsL.moveX(-5)
            earsL.moveY(-20)
            earsL.setzIndex(-1)

            var earsR = new Shape()
            earsR.setHeight(70)
            earsR.setWidth(70)
            earsR.setRadius(50)
            earsR.setColor('black')
            earsR.moveX(140)
            earsR.moveY(-20)
            earsR.setzIndex(-1)

            var pawR = new Shape()
            pawR.setHeight(70)
            pawR.setWidth(70)
            pawR.setRadius(50)
            pawR.setColor('black')
            pawR.moveX(100)
            pawR.moveY(90)
            pawR.setzIndex(-1)

            var pawL = new Shape()
            pawL.setHeight(70)
            pawL.setWidth(70)
            pawL.setRadius(50)
            pawL.setColor('black')
            pawL.moveX(40)
            pawL.moveY(90)
            pawL.setzIndex(-1)

            var eyesL = new Shape()
            eyesL.setHeight(60)
            eyesL.setWidth(60)
            eyesL.setRadius(50)
            eyesL.setColor('black')
            eyesL.moveX(25)
            eyesL.moveY(25)

            var eyesR = new Shape()
            eyesR.setHeight(60)
            eyesR.setWidth(60)
            eyesR.setRadius(50)
            eyesR.setColor('black')
            eyesR.moveX(120)
            eyesR.moveY(25)

            var nose = new Shape()
            nose.setHeight(20)
            nose.setWidth(30)
            nose.setRadius(50)
            nose.setColor('black')
            nose.moveX(90)
            nose.moveY(85)

            var panda = new Shape()
            panda.setColor('white')
            panda.setBorder(3, 'solid', 'black')
            panda.setHeight(130)
            panda.setWidth(200)
            panda.setRadius(50)

            this.add(earsL)
            this.add(earsR)
            this.add(pawL)
            this.add(pawR)

            this.add(panda)
            this.add(eyesL)
            this.add(eyesR)
            this.add(nose)
        }

        Face.prototype = Object.create(Shape.prototype)
        Face.prototype.constructor = Face


        var face = new Face()
        face.config('ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight')
        face.move(100, 100, 0)

        var face2 = new Face()
        face2.config('w', 's', 'a', 'd')
        face2.move(300, 300, 0)

        var step = 10

        var applyOnY = true

        var shapes = [face, face2]

        document.onkeydown = function (event) {
            var key = event.key.toLowerCase()

            console.log(key)

            shapes.forEach(function (shape) {
                if (key === shape.keyLeft.toLowerCase())
                    shape.moveRelativeX(-step)
                else if (key === shape.keyRight.toLowerCase())
                    shape.moveRelativeX(step)
                else if (key === shape.keyUp.toLowerCase()) {
                    if (applyOnY)
                        shape.moveRelativeY(-step)
                    else
                        shape.moveRelativeZ(-step)
                } else if (key === shape.keyDown.toLowerCase()) {
                    if (applyOnY)
                        shape.moveRelativeY(step)
                    else
                        shape.moveRelativeZ(step)
                }
            })

            if (event.key === 'Alt')
                applyOnY = false
        }



        document.onkeyup = function (event) {
            console.log(event.key)

            if (event.key === 'Alt')
                applyOnY = true
        }

        document.body.appendChild(face.container)
        document.body.appendChild(face2.container)

    </script>

</body>

</html>